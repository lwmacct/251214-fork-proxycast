# æ’ä»¶å¼€å‘æŒ‡å—

::alert{type="info"}
ğŸ“¢ æœ¬æ–‡æ¡£å·²è¿ç§»è‡³å¼€æ”¾å¹³å°ã€‚è¯·è®¿é—® [å¼€æ”¾å¹³å° - æ’ä»¶å¼€å‘](/open-platform/plugin-development) è·å–æœ€æ–°å†…å®¹ã€‚
::

æœ¬æ–‡æ¡£æè¿° ProxyCast æ’ä»¶ç³»ç»Ÿçš„è§„èŒƒå’Œå¼€å‘æŒ‡å—ï¼Œä¸ºæ’ä»¶å¸‚åœºåšå‡†å¤‡ã€‚

## æ’ä»¶ç±»å‹

ProxyCast æ”¯æŒä¸¤ç§ç±»å‹çš„æ’ä»¶ï¼š

### 1. è„šæœ¬æ’ä»¶ (Script Plugin)

çº¯ JavaScript/TypeScript æ’ä»¶ï¼Œé€šè¿‡ Hook æœºåˆ¶æ‰©å±•åŠŸèƒ½ã€‚

```json
{
  "plugin_type": "script",
  "entry": "main.js",
  "hooks": ["on_request", "on_response"]
}
```

### 2. äºŒè¿›åˆ¶æ’ä»¶ (Binary Plugin)

ç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šè¿‡ CLI æ¥å£ä¸ ProxyCast é€šä¿¡ã€‚é€‚åˆéœ€è¦ç³»ç»Ÿçº§æ“ä½œçš„å·¥å…·ã€‚

```json
{
  "plugin_type": "binary",
  "entry": "my-tool-cli",
  "binary": {
    "binary_name": "my-tool-cli",
    "github_owner": "your-org",
    "github_repo": "your-repo",
    "platform_binaries": {
      "macos-arm64": "my-tool-aarch64-apple-darwin",
      "macos-x64": "my-tool-x86_64-apple-darwin",
      "linux-x64": "my-tool-x86_64-unknown-linux-gnu",
      "linux-arm64": "my-tool-aarch64-unknown-linux-gnu",
      "windows-x64": "my-tool-x86_64-pc-windows-msvc.exe"
    },
    "checksum_file": "checksums.txt"
  }
}
```

## æ’ä»¶åŒ…ç»“æ„

æ’ä»¶ä»¥ ZIP åŒ…å½¢å¼åˆ†å‘ï¼ŒåŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š

```
my-plugin.zip
â”œâ”€â”€ plugin.json      # æ’ä»¶å…ƒæ•°æ®ï¼ˆå¿…éœ€ï¼‰
â””â”€â”€ config.json      # é»˜è®¤é…ç½®ï¼ˆå¯é€‰ï¼‰
```

### plugin.json è§„èŒƒ

```json
{
  "name": "my-plugin",
  "version": "1.0.0",
  "description": "æ’ä»¶æè¿°",
  "author": "ä½œè€…å",
  "homepage": "https://github.com/org/repo",
  "license": "MIT",
  "plugin_type": "binary",
  "entry": "my-tool-cli",
  "hooks": [],
  "min_proxycast_version": "1.0.0",
  "binary": { ... },
  "ui": {
    "surfaces": ["tools"],
    "icon": "Cpu",
    "title": "æˆ‘çš„å·¥å…·",
    "default_width": 800,
    "default_height": 600
  }
}
```

#### å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `name` | string | âœ… | æ’ä»¶å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå°å†™å­—æ¯å’Œè¿å­—ç¬¦ |
| `version` | string | âœ… | è¯­ä¹‰åŒ–ç‰ˆæœ¬å· (semver) |
| `description` | string | âœ… | æ’ä»¶æè¿° |
| `author` | string | âŒ | ä½œè€…åç§° |
| `homepage` | string | âŒ | é¡¹ç›®ä¸»é¡µ URL |
| `license` | string | âŒ | å¼€æºè®¸å¯è¯ |
| `plugin_type` | string | âœ… | `script` æˆ– `binary` |
| `entry` | string | âœ… | å…¥å£æ–‡ä»¶/äºŒè¿›åˆ¶åç§° |
| `hooks` | array | âŒ | æ³¨å†Œçš„ Hook åˆ—è¡¨ |
| `min_proxycast_version` | string | âŒ | æœ€ä½ ProxyCast ç‰ˆæœ¬è¦æ±‚ |
| `binary` | object | âŒ | äºŒè¿›åˆ¶æ’ä»¶é…ç½® |
| `ui` | object | âŒ | UI é…ç½® |

## UI å±•ç¤ºä½ç½® (Surfaces)

æ’ä»¶å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ˜¾ç¤º UIï¼š

| Surface | è¯´æ˜ | å…¥å£ä½ç½® |
|---------|------|----------|
| `tools` | å·¥å…·ç®± | å¯¼èˆªæ ã€Œå·¥å…·ã€é¡µé¢ |
| `sidebar` | ä¾§è¾¹æ  | ä¸»ä¾§è¾¹æ ï¼ˆè§„åˆ’ä¸­ï¼‰ |
| `settings` | è®¾ç½®é¡µ | è®¾ç½®é¡µæ‰©å±•åŒºåŸŸï¼ˆè§„åˆ’ä¸­ï¼‰ |

### ç¤ºä¾‹ï¼šå·¥å…·ç±»æ’ä»¶

```json
{
  "ui": {
    "surfaces": ["tools"],
    "icon": "Cpu",
    "title": "æœºå™¨ç ç®¡ç†å·¥å…·"
  }
}
```

å®‰è£…åï¼Œæ’ä»¶ä¼šå‡ºç°åœ¨ã€Œå·¥å…·ç®±ã€é¡µé¢ï¼Œç”¨æˆ·ç‚¹å‡»å³å¯æ‰“å¼€ã€‚

## å›¾æ ‡è§„èŒƒ

ä½¿ç”¨ [Lucide Icons](https://lucide.dev/icons/) å›¾æ ‡åç§°ï¼š

```json
{
  "ui": {
    "icon": "Cpu"
  }
}
```

å¸¸ç”¨å›¾æ ‡ï¼š
- `Cpu` - ç³»ç»Ÿ/ç¡¬ä»¶å·¥å…·
- `Globe` - ç½‘ç»œå·¥å…·
- `Database` - æ•°æ®å·¥å…·
- `Shield` - å®‰å…¨å·¥å…·
- `Wrench` - é€šç”¨å·¥å…·
- `Terminal` - å‘½ä»¤è¡Œå·¥å…·

## äºŒè¿›åˆ¶æ’ä»¶ CLI æ¥å£è§„èŒƒ

äºŒè¿›åˆ¶æ’ä»¶é€šè¿‡ CLI ä¸ ProxyCast é€šä¿¡ï¼Œå¿…é¡»éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

### è¾“å‡ºæ ¼å¼

æ‰€æœ‰è¾“å‡ºå¿…é¡»æ˜¯ JSON æ ¼å¼ï¼š

```bash
# æˆåŠŸ
$ my-tool-cli get
{"machine_id": "550e8400-e29b-41d4-a716-446655440000"}

# é”™è¯¯
$ my-tool-cli invalid-command
{"error": "æœªçŸ¥å‘½ä»¤: invalid-command"}
```

### é€€å‡ºç 

- `0` - æˆåŠŸ
- `1` - é”™è¯¯

### å‘½ä»¤ç»“æ„

```bash
my-tool-cli <command> [arguments]
```

å»ºè®®å®ç° `help` å‘½ä»¤ï¼š

```bash
$ my-tool-cli help
MachineIdTool CLI v1.0.0
ç”¨æ³•: my-tool-cli <å‘½ä»¤> [å‚æ•°]

å‘½ä»¤:
    get         è·å–å½“å‰å€¼
    set <value> è®¾ç½®æ–°å€¼
    help        æ˜¾ç¤ºå¸®åŠ©
```

## æ’ä»¶å®‰è£…æµç¨‹

1. **ä¸‹è½½æ’ä»¶åŒ…** - ä» URL æˆ–æœ¬åœ°æ–‡ä»¶è·å– ZIP
2. **è§£å‹éªŒè¯** - è§£å‹å¹¶éªŒè¯ plugin.json
3. **ä¸‹è½½äºŒè¿›åˆ¶** - å¦‚æœæ˜¯äºŒè¿›åˆ¶æ’ä»¶ï¼Œæ ¹æ®å½“å‰å¹³å°ä¸‹è½½å¯¹åº”äºŒè¿›åˆ¶
4. **æ ¡éªŒå®Œæ•´æ€§** - éªŒè¯ checksum
5. **æ³¨å†Œæ’ä»¶** - å°†æ’ä»¶ä¿¡æ¯å†™å…¥æ•°æ®åº“
6. **åŠ è½½æ’ä»¶** - å¯ç”¨æ’ä»¶åŠŸèƒ½

## æ’ä»¶å‘å¸ƒ

### GitHub Release å‘å¸ƒ

æ¨èé€šè¿‡ GitHub Release å‘å¸ƒæ’ä»¶ï¼š

1. åˆ›å»º `plugin/` ç›®å½•ï¼ŒåŒ…å« `plugin.json` å’Œ `config.json`
2. åœ¨ GitHub Actions ä¸­æ‰“åŒ… ZIP
3. ä¸Šä¼ åˆ° Release Assets

```yaml
- name: Package plugin
  run: |
    mkdir -p plugin-package
    cp plugin/plugin.json plugin-package/
    cp plugin/config.json plugin-package/
    cd plugin-package
    zip -j ../release/my-plugin.zip plugin.json config.json
```

### æ’ä»¶å¸‚åœºï¼ˆè§„åˆ’ä¸­ï¼‰

æœªæ¥å°†æ”¯æŒï¼š
- æ’ä»¶å¸‚åœºæµè§ˆå’Œæœç´¢
- ä¸€é”®å®‰è£…
- è‡ªåŠ¨æ›´æ–°
- è¯„åˆ†å’Œè¯„è®º

## æ¨èæ’ä»¶

ProxyCast å†…ç½®æ¨èæ’ä»¶åˆ—è¡¨ï¼Œåœ¨ã€Œå·¥å…·ç®±ã€å’Œã€Œæ’ä»¶ä¸­å¿ƒã€æ˜¾ç¤ºæœªå®‰è£…çš„æ¨èæ’ä»¶ã€‚

è¦å°†æ’ä»¶æ·»åŠ åˆ°æ¨èåˆ—è¡¨ï¼Œè¯·æäº¤ PR ä¿®æ”¹ï¼š
- `src/components/tools/ToolsPage.tsx` - `recommendedPlugins`
- `src/components/plugins/PluginManager.tsx` - `recommendedPlugins`

## ç¤ºä¾‹æ’ä»¶

å‚è€ƒ [MachineIdTool](https://github.com/aiclientproxy/MachineIdTool) ä½œä¸ºäºŒè¿›åˆ¶æ’ä»¶çš„å®Œæ•´ç¤ºä¾‹ã€‚

## å¼€å‘è°ƒè¯•

### æœ¬åœ°å®‰è£…æµ‹è¯•

1. æ‰“åŒ…æ’ä»¶ ZIP
2. åœ¨ã€Œæ’ä»¶ä¸­å¿ƒã€ç‚¹å‡»ã€Œå®‰è£…æ’ä»¶ã€
3. é€‰æ‹©æœ¬åœ° ZIP æ–‡ä»¶å®‰è£…

### æ—¥å¿—è°ƒè¯•

æ’ä»¶æ‰§è¡Œæ—¥å¿—ä¿å­˜åœ¨ï¼š
- macOS: `~/Library/Application Support/proxycast/logs/`
- Windows: `%APPDATA%/proxycast/logs/`
- Linux: `~/.local/share/proxycast/logs/`
